<!DOCTYPE html>

<html>
<head>
  <title>TopLevelObject</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="array_items_observer.html">
                  array_items_observer.rb
                </a>
              
                
                <a class="source" href="attributes_object.html">
                  attributes_object.rb
                </a>
              
                
                <a class="source" href="base_collection.html">
                  base_collection.rb
                </a>
              
                
                <a class="source" href="base_map.html">
                  base_map.rb
                </a>
              
                
                <a class="source" href="base_object.html">
                  base_object.rb
                </a>
              
                
                <a class="source" href="errors_collection.html">
                  errors_collection.rb
                </a>
              
                
                <a class="source" href="included_resources_collection.html">
                  included_resources_collection.rb
                </a>
              
                
                <a class="source" href="includes_helper.html">
                  includes_helper.rb
                </a>
              
                
                <a class="source" href="json_api_object.html">
                  json_api_object.rb
                </a>
              
                
                <a class="source" href="link_object.html">
                  link_object.rb
                </a>
              
                
                <a class="source" href="links_object.html">
                  links_object.rb
                </a>
              
                
                <a class="source" href="member_names.html">
                  member_names.rb
                </a>
              
                
                <a class="source" href="meta_object.html">
                  meta_object.rb
                </a>
              
                
                <a class="source" href="null.html">
                  null.rb
                </a>
              
                
                <a class="source" href="pagination_links.html">
                  pagination_links.rb
                </a>
              
                
                <a class="source" href="relationship_links_object.html">
                  relationship_links_object.rb
                </a>
              
                
                <a class="source" href="relationships_object.html">
                  relationships_object.rb
                </a>
              
                
                <a class="source" href="resource_identifier_object.html">
                  resource_identifier_object.rb
                </a>
              
                
                <a class="source" href="resource_identifiers_collection.html">
                  resource_identifiers_collection.rb
                </a>
              
                
                <a class="source" href="resource_object.html">
                  resource_object.rb
                </a>
              
                
                <a class="source" href="resources_collection.html">
                  resources_collection.rb
                </a>
              
                
                <a class="source" href="top_level_links_object.html">
                  top_level_links_object.rb
                </a>
              
                
                <a class="source" href="top_level_object.html">
                  top_level_object.rb
                </a>
              
                
                <a class="source" href="validation_error.html">
                  validation_error.rb
                </a>
              
                
                <a class="source" href="version.html">
                  version.rb
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              <h1 id="toplevelobject">TopLevelObject</h1>

            </div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>A JSON object <strong>MUST</strong> be at the root of every JSON API request and response
containing data. This object defines a document’s “top level”.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">JSONAPIObjects</span></span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TopLevelObject</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">BaseObject</span></span></span>
    default(<span class="hljs-symbol">:jsonapi</span>) { <span class="hljs-constant">JSONAPIObject</span>.new <span class="hljs-symbol">version:</span> <span class="hljs-string">'1.0'</span> }</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>A document <strong>MUST</strong> contain at least one of:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    must_contain_one_of!(</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p><strong>data:</strong> The document’s “primary data”</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-symbol">:data</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p><strong>errors:</strong> An array of errors</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-symbol">:errors</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p><strong>meta:</strong> a meta object that contains non-standard meta-information.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-symbol">:meta</span>
    )

    collects <span class="hljs-symbol">:errors</span>, <span class="hljs-symbol">as:</span> <span class="hljs-constant">ErrorsCollection</span>
    implements <span class="hljs-symbol">:meta</span>, <span class="hljs-symbol">as:</span> <span class="hljs-constant">MetaObject</span></pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>The members <code>data</code> and <code>errors</code> <strong>MUST NOT</strong> coexist in the same document.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    must_not_coexist! <span class="hljs-symbol">:data</span>, <span class="hljs-symbol">:errors</span></pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>A document <strong>MAY</strong> contain any of these top-level members:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    may_contain!(</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p><strong>links:</strong> a links_object related to the primary data.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-symbol">:links</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p><strong>included:</strong> an array of resource objects that are related to the primary.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-symbol">:included</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p><strong>jsonapi:</strong> an object describing the server’s implementation.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>      <span class="hljs-symbol">:jsonapi</span>
    )

    implements <span class="hljs-symbol">:links</span>, <span class="hljs-symbol">as:</span> <span class="hljs-constant">TopLevelLinksObject</span>
    collects <span class="hljs-symbol">:included</span>, <span class="hljs-symbol">as:</span> <span class="hljs-constant">IncludedResourcesCollection</span>
    implements <span class="hljs-symbol">:jsonapi</span>, <span class="hljs-symbol">as:</span> <span class="hljs-constant">JSONAPIObject</span></pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>If a document does not contain a top-level <code>data</code> key, the <code>included</code> member
<strong>MUST NOT</strong> be present either.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    may_not_exist! <span class="hljs-symbol">:included</span>, <span class="hljs-symbol">without:</span> <span class="hljs-symbol">:data</span></pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>The document’s “primary data” is a representation of the resource or collection
of resources targeted by a request.
Primary data <strong>MUST</strong> be either:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    type_of! <span class="hljs-symbol">:data</span>, <span class="hljs-symbol">must_be:</span> [</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>A single <strong>ResourceObject</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                               <span class="hljs-constant">ResourceObject</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>A single <strong>ResourceIdentifierObject</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                               <span class="hljs-constant">ResourceIdentifierObject</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>Null</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                               <span class="hljs-constant">Null</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>A collection of <strong>ResourceObjects</strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                               <span class="hljs-constant">ResourcesCollection</span>,</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>A collection of <strong><a href="resource_identifier_object.html">ResourceIdentifierObjects</a></strong></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                               <span class="hljs-constant">ResourceIdentifiersCollection</span>
                             ]

    set_callback <span class="hljs-symbol">:compile</span>, <span class="hljs-symbol">:before</span>, <span class="hljs-symbol">:fetch_includes</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">[]=</span><span class="hljs-params">(k, v)</span></span>
      v = data_from_value(data_from_value v) <span class="hljs-keyword">if</span> k.to_sym == <span class="hljs-symbol">:data</span>
      <span class="hljs-keyword">super</span>(k, v)
    <span class="hljs-keyword">end</span>

    private

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">data_from_value</span><span class="hljs-params">(value)</span></span>
      <span class="hljs-keyword">case</span> value
      <span class="hljs-keyword">when</span> <span class="hljs-constant">Array</span>
        <span class="hljs-constant">ResourcesObject</span>.new value
      <span class="hljs-keyword">when</span> <span class="hljs-constant">Hash</span>
        <span class="hljs-constant">ResourceObject</span>.new value
      <span class="hljs-keyword">else</span>
        value
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
