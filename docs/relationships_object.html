<!DOCTYPE html>

<html>
<head>
  <title>relationships_object.rb</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="array_items_observer.html">
                  array_items_observer.rb
                </a>
              
                
                <a class="source" href="attributes_object.html">
                  attributes_object.rb
                </a>
              
                
                <a class="source" href="base_collection.html">
                  base_collection.rb
                </a>
              
                
                <a class="source" href="base_map.html">
                  base_map.rb
                </a>
              
                
                <a class="source" href="base_object.html">
                  base_object.rb
                </a>
              
                
                <a class="source" href="errors_collection.html">
                  errors_collection.rb
                </a>
              
                
                <a class="source" href="included_resources_collection.html">
                  included_resources_collection.rb
                </a>
              
                
                <a class="source" href="includes_helper.html">
                  includes_helper.rb
                </a>
              
                
                <a class="source" href="json_api_object.html">
                  json_api_object.rb
                </a>
              
                
                <a class="source" href="link_object.html">
                  link_object.rb
                </a>
              
                
                <a class="source" href="links_object.html">
                  links_object.rb
                </a>
              
                
                <a class="source" href="member_names.html">
                  member_names.rb
                </a>
              
                
                <a class="source" href="meta_object.html">
                  meta_object.rb
                </a>
              
                
                <a class="source" href="null.html">
                  null.rb
                </a>
              
                
                <a class="source" href="pagination_links.html">
                  pagination_links.rb
                </a>
              
                
                <a class="source" href="relationship_links_object.html">
                  relationship_links_object.rb
                </a>
              
                
                <a class="source" href="relationships_object.html">
                  relationships_object.rb
                </a>
              
                
                <a class="source" href="resource_identifier_object.html">
                  resource_identifier_object.rb
                </a>
              
                
                <a class="source" href="resource_identifiers_collection.html">
                  resource_identifiers_collection.rb
                </a>
              
                
                <a class="source" href="resource_object.html">
                  resource_object.rb
                </a>
              
                
                <a class="source" href="resources_collection.html">
                  resources_collection.rb
                </a>
              
                
                <a class="source" href="top_level_links_object.html">
                  top_level_links_object.rb
                </a>
              
                
                <a class="source" href="top_level_object.html">
                  top_level_object.rb
                </a>
              
                
                <a class="source" href="validation_error.html">
                  validation_error.rb
                </a>
              
                
                <a class="source" href="version.html">
                  version.rb
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>relationships_object.rb</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-class"><span class="hljs-keyword">module</span> <span class="hljs-title">JSONAPIObjects</span></span>
  <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RelationshipsObject</span> <span class="hljs-inheritance">&lt; <span class="hljs-parent">BaseMap</span></span></span></pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>The value of the relationships key MUST be an object (a “relationships object”). Members of the relationships object (“relationships”) represent references from the resource object in which it’s defined to other resource objects.
Relationships may be to-one or to-many.</p>
<p>A “relationship object” MUST contain at least one of the following:</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    must_contain_one_of! <span class="hljs-symbol">:links</span>, <span class="hljs-comment"># A links object.</span>
                         <span class="hljs-symbol">:data</span>, <span class="hljs-comment"># Resource linkage</span>
                         <span class="hljs-symbol">:meta</span> <span class="hljs-comment"># A meta object that contains non-standard meta-information about the relationship.</span>

    implements <span class="hljs-symbol">:links</span>, <span class="hljs-symbol">as:</span> <span class="hljs-constant">LinksObject</span>
    implements <span class="hljs-symbol">:meta</span>, <span class="hljs-symbol">as:</span> <span class="hljs-constant">MetaObject</span></pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>A relationship object that represents a to-many relationship MAY also contain pagination links under the links member, as described below.
A resource object’s AttributesObject and its RelationshipsObject are collectively called its fields.
Fields for a ResourceObject <strong>MUST</strong> share a common namespace with each
other and with <code>type</code> and <code>id</code>. In other words, a resource can not have an
attribute and relationship with the same name, nor can it have an attribute
or relationship named <code>type</code> or <code>id</code>.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    must_not_contain! <span class="hljs-symbol">:type</span>, <span class="hljs-symbol">:id</span>
    validate_each! <span class="hljs-symbol">message:</span> <span class="hljs-string">'conflicts with a resource_key'</span> <span class="hljs-keyword">do</span> |obj, key, <span class="hljs-number">_</span>|
      !obj.parent.attribute_keys.<span class="hljs-keyword">include</span>? key
    <span class="hljs-keyword">end</span>

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">[]=</span><span class="hljs-params">(k, v)</span></span>
      v = data_from_value(data_from_value v) <span class="hljs-keyword">if</span> k.to_sym == <span class="hljs-symbol">:data</span>
      <span class="hljs-keyword">super</span>(k, v)
    <span class="hljs-keyword">end</span>

    private

    <span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">data_from_value</span><span class="hljs-params">(value)</span></span>
      <span class="hljs-keyword">case</span> value
      <span class="hljs-keyword">when</span> <span class="hljs-constant">Array</span>
        <span class="hljs-constant">ResourceIdentifiersCollection</span>.new value
      <span class="hljs-keyword">when</span> <span class="hljs-constant">Hash</span>
        <span class="hljs-constant">ResourceIdentifier</span>.new value
      <span class="hljs-keyword">else</span>
        value
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>

  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">end</span></pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
